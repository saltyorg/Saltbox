##########################################################################
# Title:         Saltbox: Gluetun | Default Variables                    #
# Author(s):     owine                                                  #
# URL:           https://github.com/saltyorg/Saltbox                    #
# --                                                                    #
##########################################################################
#                   GNU General Public License v3.0                     #
##########################################################################
---
################################
# Basics
################################

gluetun_instances: ["gluetun"]

################################
# Settings
################################

# These variables map to the appropriate Docker ENVs
# Review the gluetun wiki (https://github.com/qdm12/gluetun/wiki)
gluetun_role_vpn_service_provider: ""
gluetun_role_vpn_type: ""
gluetun_role_openvpn_custom_config: ""
gluetun_role_openvpn_endpoint_ip: ""
gluetun_role_openvpn_endpoint_port: ""
gluetun_role_openvpn_user: ""
gluetun_role_openvpn_password: ""
gluetun_role_openvpn_key_passphrase: ""
gluetun_role_vpn_endpoint_ip: ""
gluetun_role_vpn_endpoint_port: ""
gluetun_role_wireguard_endpoint_ip: ""
gluetun_role_wireguard_endpoint_port: ""
gluetun_role_wireguard_mtu: ""
gluetun_role_wireguard_public_key: ""
gluetun_role_wireguard_private_key: ""
gluetun_role_wireguard_preshared_key: ""
gluetun_role_wireguard_addresses: ""
gluetun_role_server_countries: ""
gluetun_role_server_cities: ""
gluetun_role_server_hostnames: ""
gluetun_role_server_names: ""
gluetun_role_server_regions: ""
gluetun_role_firewall_vpn_input_ports: ""
gluetun_role_firewall_input_ports: ""
gluetun_role_firewall_outbound_subnets: ""
gluetun_role_docker_resolver: true

################################
# Paths
################################

gluetun_role_paths_folder: "{{ gluetun_name }}"
gluetun_role_paths_location: "{{ server_appdata_path }}/{{ gluetun_role_paths_folder }}"
gluetun_role_paths_folders_list:
  - "{{ gluetun_role_paths_location }}"

################################
# Docker
################################

# Container
gluetun_role_docker_container: "{{ gluetun_name }}"

# Image
gluetun_role_docker_image_pull: true
gluetun_role_docker_image_repo: "qmcgaw/gluetun"
gluetun_role_docker_image_tag: "v3"
gluetun_role_docker_image: "{{ lookup('role_var', '_docker_image_repo', role='gluetun') }}:{{ lookup('role_var', '_docker_image_tag', role='gluetun') }}"

# Envs
gluetun_role_docker_envs_default:
  DNS_KEEP_NAMESERVER: "{{ 'on' if lookup('role_var', '_docker_resolver', role='gluetun') else 'off' }}"
  FIREWALL_INPUT_PORTS: "{{ lookup('role_var', '_firewall_input_ports', role='gluetun') if (lookup('role_var', '_firewall_input_ports', role='gluetun') | length > 0) else omit }}"
  FIREWALL_OUTBOUND_SUBNETS: "{{ lookup('role_var', '_firewall_outbound_subnets', role='gluetun') if (lookup('role_var', '_firewall_outbound_subnets', role='gluetun') | length > 0) else omit }}"
  FIREWALL_VPN_INPUT_PORTS: "{{ lookup('role_var', '_firewall_vpn_input_ports', role='gluetun') if (lookup('role_var', '_firewall_vpn_input_ports', role='gluetun') | length > 0) else omit }}"
  HTTPPROXY: "on"
  HTTPPROXY_STEALTH: "on"
  OPENVPN_CUSTOM_CONFIG: "{{ lookup('role_var', '_openvpn_custom_config', role='gluetun') if (lookup('role_var', '_openvpn_custom_config', role='gluetun') | length > 0) else omit }}"
  OPENVPN_ENDPOINT_IP: "{{ lookup('role_var', '_openvpn_endpoint_ip', role='gluetun') if (lookup('role_var', '_openvpn_endpoint_ip', role='gluetun') | length > 0) else omit }}"
  OPENVPN_ENDPOINT_PORT: "{{ lookup('role_var', '_openvpn_endpoint_port', role='gluetun') if (lookup('role_var', '_openvpn_endpoint_port', role='gluetun') | length > 0) else omit }}"
  OPENVPN_KEY_PASSPHRASE: "{{ lookup('role_var', '_openvpn_key_passphrase', role='gluetun') if (lookup('role_var', '_openvpn_key_passphrase', role='gluetun') | length > 0) else omit }}"
  OPENVPN_PASSWORD: "{{ lookup('role_var', '_openvpn_password', role='gluetun') if (lookup('role_var', '_openvpn_password', role='gluetun') | length > 0) else omit }}"
  OPENVPN_USER: "{{ lookup('role_var', '_openvpn_user', role='gluetun') if (lookup('role_var', '_openvpn_user', role='gluetun') | length > 0) else omit }}"
  PGID: "{{ gid }}"
  PUID: "{{ uid }}"
  SERVER_CITIES: "{{ lookup('role_var', '_server_cities', role='gluetun') if (lookup('role_var', '_server_cities', role='gluetun') | length > 0) else omit }}"
  SERVER_COUNTRIES: "{{ lookup('role_var', '_server_countries', role='gluetun') if (lookup('role_var', '_server_countries', role='gluetun') | length > 0) else omit }}"
  SERVER_HOSTNAMES: "{{ lookup('role_var', '_server_hostnames', role='gluetun') if (lookup('role_var', '_server_hostnames', role='gluetun') | length > 0) else omit }}"
  SERVER_NAMES: "{{ lookup('role_var', '_server_names', role='gluetun') if (lookup('role_var', '_server_names', role='gluetun') | length > 0) else omit }}"
  SERVER_REGIONS: "{{ lookup('role_var', '_server_regions', role='gluetun') if (lookup('role_var', '_server_regions', role='gluetun') | length > 0) else omit }}"
  TZ: "{{ tz }}"
  VPN_ENDPOINT_IP: "{{ lookup('role_var', '_vpn_endpoint_ip', role='gluetun') if (lookup('role_var', '_vpn_endpoint_ip', role='gluetun') | length > 0) else omit }}"
  VPN_ENDPOINT_PORT: "{{ lookup('role_var', '_vpn_endpoint_port', role='gluetun') if (lookup('role_var', '_vpn_endpoint_port', role='gluetun') | length > 0) else omit }}"
  VPN_SERVICE_PROVIDER: "{{ lookup('role_var', '_vpn_service_provider', role='gluetun') if (lookup('role_var', '_vpn_service_provider', role='gluetun') | length > 0) else omit }}"
  VPN_TYPE: "{{ lookup('role_var', '_vpn_type', role='gluetun') if (lookup('role_var', '_vpn_type', role='gluetun') | length > 0) else omit }}"
  WIREGUARD_ADDRESSES: "{{ lookup('role_var', '_wireguard_addresses', role='gluetun') if (lookup('role_var', '_wireguard_addresses', role='gluetun') | length > 0) else omit }}"
  WIREGUARD_ENDPOINT_IP: "{{ lookup('role_var', '_wireguard_endpoint_ip', role='gluetun') if (lookup('role_var', '_wireguard_endpoint_ip', role='gluetun') | length > 0) else omit }}"
  WIREGUARD_ENDPOINT_PORT: "{{ lookup('role_var', '_wireguard_endpoint_port', role='gluetun') if (lookup('role_var', '_wireguard_endpoint_port', role='gluetun') | length > 0) else omit }}"
  WIREGUARD_MTU: "{{ lookup('role_var', '_wireguard_mtu', role='gluetun') if (lookup('role_var', '_wireguard_mtu', role='gluetun') | length > 0) else omit }}"
  WIREGUARD_PRESHARED_KEY: "{{ lookup('role_var', '_wireguard_preshared_key', role='gluetun') if (lookup('role_var', '_wireguard_preshared_key', role='gluetun') | length > 0) else omit }}"
  WIREGUARD_PRIVATE_KEY: "{{ lookup('role_var', '_wireguard_private_key', role='gluetun') if (lookup('role_var', '_wireguard_private_key', role='gluetun') | length > 0) else omit }}"
  WIREGUARD_PUBLIC_KEY: "{{ lookup('role_var', '_wireguard_public_key', role='gluetun') if (lookup('role_var', '_wireguard_public_key', role='gluetun') | length > 0) else omit }}"
gluetun_role_docker_envs_custom: {}
gluetun_role_docker_envs: "{{ lookup('role_var', '_docker_envs_default', role='gluetun')
                              | combine(lookup('role_var', '_docker_envs_custom', role='gluetun')) }}"

# Volumes
gluetun_role_docker_volumes_global: false
gluetun_role_docker_volumes_default:
  - "{{ gluetun_role_paths_location }}:/gluetun"
gluetun_role_docker_volumes_custom: []
gluetun_role_docker_volumes: "{{ lookup('role_var', '_docker_volumes_default', role='gluetun')
                                 + lookup('role_var', '_docker_volumes_custom', role='gluetun') }}"

# Labels
gluetun_role_docker_labels_default:
  com.centurylinklabs.watchtower.enable: "false"
gluetun_role_docker_labels_custom: {}
gluetun_role_docker_labels: "{{ lookup('role_var', '_docker_labels_default', role='gluetun')
                                | combine(lookup('role_var', '_docker_labels_custom', role='gluetun')) }}"

# Hostname
gluetun_role_docker_hostname: "{{ gluetun_name }}"

# Networks
gluetun_role_docker_networks_alias: "{{ gluetun_name }}"
gluetun_role_docker_networks_default: []
gluetun_role_docker_networks_custom: []
gluetun_role_docker_networks: "{{ docker_networks_common
                                  + lookup('role_var', '_docker_networks_default', role='gluetun')
                                  + lookup('role_var', '_docker_networks_custom', role='gluetun') }}"

# Capabilities
gluetun_role_docker_capabilities_default:
  - NET_ADMIN
gluetun_role_docker_capabilities_custom: []
gluetun_role_docker_capabilities: "{{ lookup('role_var', '_docker_capabilities_default', role='gluetun')
                                      + lookup('role_var', '_docker_capabilities_custom', role='gluetun') }}"

# Restart Policy
gluetun_role_docker_restart_policy: unless-stopped

# State
gluetun_role_docker_state: started
